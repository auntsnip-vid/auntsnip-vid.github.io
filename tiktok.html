<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Videos</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
<style>
html,body{
  margin:0;
  height:100%;
  background:black;
  overflow:hidden;
}
.feed{
  height:100%;
  overflow-y:auto;
  scroll-snap-type:y mandatory;
  -webkit-overflow-scrolling:touch;
}
.item{
  height:100vh;
  scroll-snap-align:start;
}
video{
  width:100%;
  height:100%;
  object-fit:cover;
}
</style>
</head>

<body>

<div class="feed" id="feed"></div>

<script>
const qs = new URLSearchParams(location.search);
const raw = qs.get("v");
if(!raw) location.href="https://auntsnip-vid.github.io";

const list = decodeURIComponent(raw).split("|");
const feed = document.getElementById("feed");

// Render video list
list.forEach(src=>{
  const item=document.createElement("div");
  item.className="item";
  item.innerHTML=`<video src="${src}" muted playsinline preload="auto"></video>`;
  feed.appendChild(item);
});

const videos=[...document.querySelectorAll("video")];

// Intersection Observer (smooth)
const observer=new IntersectionObserver(entries=>{
  entries.forEach(entry=>{
    const v=entry.target;
    if(entry.isIntersecting){
      v.play().catch(()=>{});
    }else{
      v.pause();
    }
  });
},{ threshold:0.6 });

videos.forEach(v=>observer.observe(v));

// Tap anywhere to unmute
document.body.addEventListener("click",()=>{
  videos.forEach(v=>v.muted=false);
},{ once:true });
</script>

</body>
</html>
